<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>WFC Visualizer</title>
  <link rel="stylesheet" href="/styles/main.css">
</head>
<body>
  <div id="app">
    <header>
      <h1>WFC Visualizer</h1>
      <button id="theme-toggle" class="icon-btn" title="Toggle light/dark theme">üåô</button>
    </header>

    <main>
      <aside id="sidebar">
        <section id="sample-selector">
          <h2>Samples</h2>
          <select id="model-type">
            <option value="overlapping">Overlapping Model</option>
            <option value="simpletiled">Simple Tiled Model</option>
          </select>
          <select id="sample-select"></select>
          <select id="subset-select" class="hidden"></select>
          <p id="sample-description" class="description"></p>
          <div id="sample-preview">
            <img id="sample-image" alt="Sample input">
          </div>
        </section>

        <section id="settings">
          <h2>Settings <button id="reset-defaults" class="small-btn">Reset to Defaults</button></h2>

          <fieldset>
            <legend>Output</legend>
            <div class="setting-row">
              <div class="setting">
                <label for="width">Width</label>
                <input type="number" id="width" value="48" min="8" max="128">
              </div>
              <div class="setting">
                <label for="height">Height</label>
                <input type="number" id="height" value="48" min="8" max="128">
              </div>
            </div>
            <div class="setting">
              <label><input type="checkbox" id="periodic"> Periodic output</label>
            </div>
          </fieldset>

          <fieldset id="pattern-extraction">
            <legend>Pattern Extraction</legend>
            <div class="setting-row">
              <div class="setting">
                <label for="pattern-size">N</label>
                <input type="number" id="pattern-size" value="3" min="2" max="5">
              </div>
              <div class="setting">
                <label for="symmetry">Symmetry</label>
                <select id="symmetry">
                  <option value="1">1</option>
                  <option value="2">2</option>
                  <option value="8" selected>8</option>
                </select>
              </div>
            </div>
            <div class="checkbox-row">
              <div class="setting">
                <label><input type="checkbox" id="periodic-input" checked> Periodic input</label>
              </div>
              <div class="setting">
                <label><input type="checkbox" id="ground"> Ground</label>
              </div>
            </div>
          </fieldset>

          <fieldset>
            <legend>Algorithm</legend>
            <div class="setting">
              <label for="heuristic">Heuristic</label>
              <select id="heuristic">
                <option value="entropy" selected>Entropy</option>
                <option value="mrv">MRV</option>
                <option value="scanline">Scanline</option>
              </select>
            </div>
            <div class="setting">
              <label for="seed">Seed</label>
              <input type="number" id="seed" value="0">
              <button id="random-seed" class="icon-btn" title="Random seed">üé≤</button>
            </div>
          </fieldset>
        </section>

        <section id="visualization-options">
          <h2>Visualization</h2>
          <div class="setting">
            <label><input type="checkbox" id="show-entropy"> Entropy heatmap</label>
          </div>
          <button id="show-patterns-btn" class="small-btn">Show Patterns</button>
        </section>
      </aside>

      <div id="canvas-container">
        <canvas id="output-canvas"></canvas>
        <canvas id="overlay-canvas"></canvas>
      </div>
    </main>

    <footer id="controls">
      <div id="playback">
        <button id="play-btn">‚ñ∂ Run</button>
        <button id="pause-btn" disabled>‚è∏ Pause</button>
        <button id="step-btn">‚è≠ Step</button>
        <button id="stop-btn" disabled>‚èπ Stop</button>
      </div>
      <div id="animation-control">
        <label><input type="checkbox" id="animate" checked> Animate</label>
        <input type="range" id="speed" min="1" max="100" value="50">
        <span id="speed-value">50ms</span>
      </div>
      <div id="status">
        <span id="status-text">Ready</span>
        <span id="progress"></span>
      </div>
    </footer>

    <!-- Patterns Modal -->
    <div id="patterns-modal" class="modal hidden">
      <div class="modal-content">
        <div class="modal-header">
          <h3>Extracted Patterns <span id="pattern-count"></span></h3>
          <button id="close-patterns-btn" class="icon-btn">&times;</button>
        </div>
        <div id="patterns-grid" class="patterns-grid"></div>
      </div>
    </div>
  </div>

  <script type="module" src="/src/main.ts"></script>
</body>
</html>
